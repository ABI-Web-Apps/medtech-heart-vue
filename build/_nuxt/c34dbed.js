(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{376:function(e,t,r){var content=r(382);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(24).default)("5a8b5aae",content,!0,{sourceMap:!1})},380:function(e,t,r){e.exports=r.p+"img/gestures-icons.104494d.png"},381:function(e,t,r){"use strict";r(376)},382:function(e,t,r){var n=r(23)(!1);n.push([e.i,"@import url(https://fonts.googleapis.com/css?family=Helvetica&display=swap);"]),n.push([e.i,".outer-model[data-v-054255b6]{height:100%}.hidden-input[data-v-054255b6]{width:1px;height:1px}",""]),e.exports=n},397:function(e,t,r){"use strict";r.r(t);r(40),r(33),r(55),r(62);var n={data:function(){return{heartRate:2500,threeDControlsHeight:0,zincRenderer:null,halfHeartFlag:!1,oldCam:null,modelToSceneArray:[],container:null,modelURLsArray:{NoInfarct_highres:["heartInfarct/noInfarct_highres_metadata.json","heartInfarct/noInfarct_view.json"],NormalElectricity_highres:["heartElectricity/normalActivity_highres_metadata.json","heartElectricity/normalActivity_view.json"],CompensatedFailure_highres:["heartFailure/compensated_highres_metadata.json","heartFailure/compensated_view.json"],SmallInfarct_highres:["heartInfarct/smallInfarct_highres_metadata.json","heartInfarct/smallInfarct_view.json"],LargeInfarct_highres:["heartInfarct/largeInfarct_highres_metadata.json","heartInfarct/largeInfarct_view.json"],ArrythmiaElectricity_highres:["heartElectricity/arrythmiaActivity_highres_metadata.json","heartElectricity/arrythmiaActivity_view.json"],DecompensatedFailure_highres:["heartFailure/decompensated_highres_metadata.json","heartFailure/decompensated_view.json"]}}},props:{totalHeight:{type:Number},availableHeight:{type:Number}},mounted:function(){this.start()},methods:{start:function(){this.container=this.$refs.zincDomObject,this.zincRenderer=this.$currentRender(),this.modelToSceneArray=this.$modelToSceneArray(),this.container&&(void 0===this.zincRenderer&&this.initialZinc(),this.zincRenderer.switchContainer(this.container),this.halfHeartFlag=this.$isHalfModel()),"NoInfarct"!==this.$model().name&&"SmallInfarct"!==this.$model().name&&"LargeInfarct"!==this.$model().name&&"CompensatedFailure"!==this.$model().name&&"DecompensatedFailure"!==this.$model().name&&"NormalElectricity"!==this.$model().name||(this.oldCam=this.$perviousCamera()),"ArrythmiaElectricity"===this.$model().name?this.loadModel(this.$model().name,.25):this.loadModel(this.$model().name,1),this.trackHalfModel(),this.heartRate=this.$heartBeat(),this.updateSlider(this.heartRate)},initialZinc:function(){this.zincRenderer=new Zinc.Renderer(this.container,window),Zinc.defaultMaterialColor=16777116,this.zincRenderer.initialiseVisualisation(),this.zincRenderer.getThreeJSRenderer().setClearColor(0,1);var e=this.zincRenderer.getSceneByName("default");this.zincRenderer.setCurrentScene(e);var t=this.zincRenderer;this.$store.commit("setZincRender",t),this.zincRenderer.animate()},loadModel:function(e,t){var r="_highres",n=this.modelURLsArray[e+r][0],o=this.modelURLsArray[e+r][1],l=this.zincRenderer.getSceneByName(e);if(null==l){(l=this.zincRenderer.createScene(e)).setDuration(l.getDuration()/t),l.loadViewURL(o),l.loadMetadataURL(n,this.meshReady(this.oldCam)),this.zincRenderer.setCurrentScene(l);var c={name:e,sceneObj:l};this.$store.commit("setModelToSceneArray",c),this.addLabel(this.$model().name)}else l.switchContainer(this.container),this.zincRenderer.setCurrentScene(l),this.shareCameraSettings(this.oldCam)},meshReady:function(e){var t=this;return function(r){r.groupName&&r.groupName.includes("Post")&&r.setVisibility(!t.halfHeartFlag),r.groupName&&r.groupName.includes("Fibres")&&r.setVisibility(!1),t.shareCameraSettings(e),t.zincRenderer.getCurrentScene().getZincCameraControls().updateAutoTumble()}},shareCameraSettings:function(e){if(null!==e&&null!==e.near&&void 0!==e.near){var t=this.zincRenderer.getCurrentScene().camera;t.near=e.near,t.far=e.far,t.position.copy(e.position),t.target=new THREE.Vector3(e.target.x,e.target.y,e.target.z),t.up.copy(e.up),this.zincRenderer.getCurrentScene().updateDirectionalLight()}},onResetAllModelsView:function(){for(var e in this.halfHeartFlag=!1,this.heartRate=2500,$nuxt.$emit("beat-reset",2500),this.$store.commit("setHeartBeat",2500),this.$store.commit("setIsHalfModel",!1),this.$store.commit("setPreviousCamera",null),this.modelToSceneArray)this.modelToSceneArray.hasOwnProperty(e)&&(this.modelToSceneArray[e].resetView(),this.modelToSceneArray[e].forEachGeometry(this.geometryShowHalf()))},trackHalfModel:function(){for(var e in this.modelToSceneArray)this.modelToSceneArray.hasOwnProperty(e)&&this.modelToSceneArray[e].forEachGeometry(this.geometryShowHalf())},updateSlider:function(e){this.zincRenderer.setPlayRate(e)},addLabel:function(e){var t=this.zincRenderer.getSceneByName(e);"NoInfarct"===e||"NormalElectricity"===e?(addLabelToScene(t,"right ventricle",-38.056679,35.639515,10.421283,60),addLabelToScene(t,"left ventricle",-48.056679,-5.639515,5.421283,60)):"SmallInfarct"===e?addLabelToScene(t,"damaged tissue",30,-50,0,60):"LargeInfarct"===e&&addLabelToScene(t,"damaged tissue",15,-55,0,60)},onHalfHeartPressed:function(){this.halfHeartFlag?(this.halfHeartFlag=!1,this.$store.commit("setIsHalfModel",!1)):(this.halfHeartFlag=!0,this.$store.commit("setIsHalfModel",!0)),this.showHalf()},showHalf:function(){this.zincRenderer.getCurrentScene().forEachGeometry(this.geometryShowHalf())},geometryShowHalf:function(){var e=this;return function(t){t.groupName&&t.groupName.includes("Post")&&t.setVisibility(!e.halfHeartFlag)}}},watch:{heartRate:function(e){this.updateSlider(e)}},created:function(){var e=this;this.$nuxt.$on("beat-update-onTime",(function(t){e.updateSlider(t)})),this.$nuxt.$on("beat-change",(function(t){e.heartRate=t,e.$store.commit("setHeartBeat",t)}))},beforeDestroy:function(){if(this.oldCam){var e=this.zincRenderer.getCurrentScene().camera,t=new THREE.Vector3,r=new THREE.Vector3,n=new THREE.Vector3;n.copy(e.target),t.copy(e.position),r.copy(e.up);var o={position:t,target:n,up:r,near:e.near,far:e.far};this.$store.commit("setPreviousCamera",o)}this.$nuxt.$off("beat-change")}},o=n,l=(r(381),r(42)),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w-full h-full lg:h-screen"},[n("div",{staticClass:"w-full h-full flex flex-col justify-center items-center"},[n("div",{ref:"zincDomObject",staticClass:"w-full h-[400px] -mt-12 lg:h-screen lg:mt-0",attrs:{id:"zincDom"},on:{dblclick:e.onHalfHeartPressed}}),e._v(" "),n("div",{ref:"threeDControls",staticClass:"lg:fixed lg:bottom-0 lg:h-24 lg:ml-24 w-full h-full flex flex-row justify-center lg:mt-0 order-first lg:order-last"},[n("div",{staticClass:"ml-0 h-full w-2/5 lg:w-64 relative"},[n("button",{staticClass:"absolute top-0 left-0 w-1/5 h-full hover:bg-gray-50/10",on:{click:e.onResetAllModelsView}}),e._v(" "),n("img",{staticClass:"h-full w-full lg:object-contain",attrs:{src:r(380)}}),e._v(" "),n("button",{staticClass:"absolute top-0 right-0 w-1/4 h-full hover:bg-gray-50/10",on:{click:e.onHalfHeartPressed}})])])])])}),[],!1,null,"054255b6",null);t.default=component.exports}}]);